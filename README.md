## 介绍

本仓库提供了基于币安 (Binance) 的二级市场舆情系统，可以根据自己的需求修改代码，设定各类告警提示

## 代码结构

- binance.py - 与币安API交互
- data_loader.py - 数据相关的读写
- monitor.py - 监控的核心方法实现
- analyze.py - 基于历史数据进行数据分析
- utils.py - 通用函数
- alarm.mp3 - 监控提示音，可以使用同名的其他mp3文件代替

## 使用说明

下载本仓库：

```shell
git clone https://github.com/geyingli/binance-monitor.git
cd binance-monitor
```

前往[币安官网](https://www.binance.com/zh-CN)注册账号，在API管理页面获取API Key和Secret Key，在本目录下新建 `api.conf` 文件并按如下格式填写 (json规范)：

```json
{
    "API Key": "XXX",
    "Secret Key": "XXX"
}
```

通过 `python3 monitor.py` 指令运行监控程序。稍等历史价量数据下载完成后，可以看到类似于以下的打印信息：

```
开始执行价量监控...
2021年11月4日 13:20:00 >>> CAKEUSDT, $19.3, 交易量突增10.0倍 ($51万)
2021年11月4日 13:29:00 >>> SLPUSDT, $0.070, 交易量突增23.6倍 ($137万)
2021年11月4日 13:31:00 >>> IOTXUSDT, $0.1548, 5分钟内价格上涨5%
2021年11月4日 13:59:00 >>> ONTUSDT, $1.113, 交易量突增11.2倍 ($28万)
2021年11月4日 14:01:00 >>> IOTXUSDT, $0.1624, 5分钟内价格上涨5%
2021年11月4日 14:01:00 >>> SLPUSDT, $0.072, 交易量突增20.1倍 ($166万)
2021年11月4日 14:04:00 >>> OMGUSDT, $15.75, 交易量突增12.6倍 ($446万)
2021年11月4日 14:12:00 >>> IOTXUSDT, $0.1706, 8分钟内价格上涨5%
2021年11月4日 14:21:00 >>> RVNUSDT, $0.1439, 交易量突增11.4倍 ($43万)
2021年11月4日 14:33:00 >>> VETUSDT, $0.1413, 交易量突增10.5倍 ($79万)
```

## 数据分析

分享一些我们在数据分析上获取的有意思的观察

#### 价格变动 (以天为周期)

我们取了头部的几十个币种，按每分钟价格涨跌百分比绘制了如下图形。可以看出，北京时间14~19点价格走势普遍偏弱 (因为这个时间美国人在睡觉?)，而晚上23点和早上5点则是涨幅分布更密集的时间

![price_change_by_day](./refs/price_change_by_day.png)

#### 价格变动 (以周为周期)

同样，我们从周一到周天的粒度对涨幅进行统计，可以看出，周五是上涨最多见的一天，跌幅第一则以周日最为显著

![price_change_by_weekday](./refs/price_change_by_weekday.png)

#### 交易额变动 (以天为周期)

下午15点开始到凌晨1点是交易额最高的一段时间

![volume_by_day](./refs/volume_by_day.png)

#### 交易额变动 (以周为周期)

从周一到周日的视角，周六和周日的交易额最低，而周三的平均交易额最高

![volume_by_weekday](./refs/volume_by_weekday.png)

## 尾言

本repo在持续使用和优化中。使用中文编写，助力海内外华人割到全世界的韭菜
